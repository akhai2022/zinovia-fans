{
  "components": {
    "schemas": {
      "CheckoutSubscriptionCreate": {
        "description": "Start subscription checkout for a creator. Provide creator_id or creator_handle. success_url/cancel_url optional (from env).",
        "properties": {
          "cancel_url": {
            "anyOf": [
              {
                "maxLength": 2048,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Cancel Url"
          },
          "creator_handle": {
            "anyOf": [
              {
                "maxLength": 64,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Creator Handle"
          },
          "creator_id": {
            "anyOf": [
              {
                "format": "uuid",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Creator Id"
          },
          "success_url": {
            "anyOf": [
              {
                "maxLength": 2048,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Success Url"
          }
        },
        "title": "CheckoutSubscriptionCreate",
        "type": "object"
      },
      "CheckoutSubscriptionOut": {
        "description": "Checkout URL for redirect.",
        "properties": {
          "checkout_url": {
            "title": "Checkout Url",
            "type": "string"
          }
        },
        "required": [
          "checkout_url"
        ],
        "title": "CheckoutSubscriptionOut",
        "type": "object"
      },
      "CreatorDiscoverItem": {
        "description": "Creator summary for discover/browse list.",
        "properties": {
          "avatar_media_id": {
            "anyOf": [
              {
                "format": "uuid",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avatar Media Id"
          },
          "creator_id": {
            "format": "uuid",
            "title": "Creator Id",
            "type": "string"
          },
          "display_name": {
            "title": "Display Name",
            "type": "string"
          },
          "followers_count": {
            "title": "Followers Count",
            "type": "integer"
          },
          "handle": {
            "title": "Handle",
            "type": "string"
          },
          "posts_count": {
            "title": "Posts Count",
            "type": "integer"
          }
        },
        "required": [
          "creator_id",
          "handle",
          "display_name",
          "avatar_media_id",
          "followers_count",
          "posts_count"
        ],
        "title": "CreatorDiscoverItem",
        "type": "object"
      },
      "CreatorDiscoverPage": {
        "description": "Paginated list of discoverable creators.",
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/CreatorDiscoverItem"
            },
            "title": "Items",
            "type": "array"
          },
          "page": {
            "title": "Page",
            "type": "integer"
          },
          "page_size": {
            "title": "Page Size",
            "type": "integer"
          },
          "total": {
            "title": "Total",
            "type": "integer"
          }
        },
        "required": [
          "items",
          "total",
          "page",
          "page_size"
        ],
        "title": "CreatorDiscoverPage",
        "type": "object"
      },
      "CreatorFollowedItem": {
        "description": "Creator summary in /me/following list.",
        "properties": {
          "avatar_media_id": {
            "anyOf": [
              {
                "format": "uuid",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avatar Media Id"
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "display_name": {
            "title": "Display Name",
            "type": "string"
          },
          "handle": {
            "title": "Handle",
            "type": "string"
          },
          "user_id": {
            "format": "uuid",
            "title": "User Id",
            "type": "string"
          }
        },
        "required": [
          "user_id",
          "handle",
          "display_name",
          "avatar_media_id",
          "created_at"
        ],
        "title": "CreatorFollowedItem",
        "type": "object"
      },
      "CreatorFollowingPage": {
        "description": "Paginated list of creators the current user follows.",
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/CreatorFollowedItem"
            },
            "title": "Items",
            "type": "array"
          },
          "page": {
            "title": "Page",
            "type": "integer"
          },
          "page_size": {
            "title": "Page Size",
            "type": "integer"
          },
          "total": {
            "title": "Total",
            "type": "integer"
          }
        },
        "required": [
          "items",
          "total",
          "page",
          "page_size"
        ],
        "title": "CreatorFollowingPage",
        "type": "object"
      },
      "CreatorProfilePublic": {
        "description": "Public view of a creator profile with aggregated counts.",
        "properties": {
          "avatar_media_id": {
            "anyOf": [
              {
                "format": "uuid",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avatar Media Id"
          },
          "banner_media_id": {
            "anyOf": [
              {
                "format": "uuid",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Banner Media Id"
          },
          "bio": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bio"
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "discoverable": {
            "title": "Discoverable",
            "type": "boolean"
          },
          "display_name": {
            "title": "Display Name",
            "type": "string"
          },
          "followers_count": {
            "title": "Followers Count",
            "type": "integer"
          },
          "handle": {
            "title": "Handle",
            "type": "string"
          },
          "is_following": {
            "default": false,
            "title": "Is Following",
            "type": "boolean"
          },
          "nsfw": {
            "title": "Nsfw",
            "type": "boolean"
          },
          "posts_count": {
            "default": 0,
            "title": "Posts Count",
            "type": "integer"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          },
          "user_id": {
            "format": "uuid",
            "title": "User Id",
            "type": "string"
          }
        },
        "required": [
          "user_id",
          "handle",
          "display_name",
          "bio",
          "avatar_media_id",
          "banner_media_id",
          "discoverable",
          "nsfw",
          "followers_count",
          "created_at",
          "updated_at"
        ],
        "title": "CreatorProfilePublic",
        "type": "object"
      },
      "CreatorProfileUpdate": {
        "description": "Fields a creator can update on their profile.",
        "properties": {
          "avatar_media_id": {
            "anyOf": [
              {
                "format": "uuid",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avatar Media Id"
          },
          "banner_media_id": {
            "anyOf": [
              {
                "format": "uuid",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Banner Media Id"
          },
          "bio": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Bio"
          },
          "discoverable": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Discoverable"
          },
          "display_name": {
            "anyOf": [
              {
                "maxLength": 120,
                "minLength": 1,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Display Name"
          },
          "handle": {
            "anyOf": [
              {
                "maxLength": 64,
                "minLength": 2,
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Handle"
          },
          "nsfw": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Nsfw"
          }
        },
        "title": "CreatorProfileUpdate",
        "type": "object"
      },
      "CreatorRegisterRequest": {
        "properties": {
          "email": {
            "format": "email",
            "title": "Email",
            "type": "string"
          },
          "password": {
            "maxLength": 128,
            "minLength": 10,
            "title": "Password",
            "type": "string"
          }
        },
        "required": [
          "email",
          "password"
        ],
        "title": "CreatorRegisterRequest",
        "type": "object"
      },
      "CreatorRegisterResponse": {
        "properties": {
          "creator_id": {
            "title": "Creator Id",
            "type": "string"
          },
          "verification_token": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Verification Token"
          }
        },
        "required": [
          "creator_id"
        ],
        "title": "CreatorRegisterResponse",
        "type": "object"
      },
      "CreatorSummary": {
        "description": "Minimal creator info for feed/post context.",
        "properties": {
          "avatar_asset_id": {
            "anyOf": [
              {
                "format": "uuid",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Avatar Asset Id"
          },
          "display_name": {
            "title": "Display Name",
            "type": "string"
          },
          "handle": {
            "title": "Handle",
            "type": "string"
          },
          "user_id": {
            "format": "uuid",
            "title": "User Id",
            "type": "string"
          }
        },
        "required": [
          "user_id",
          "handle",
          "display_name",
          "avatar_asset_id"
        ],
        "title": "CreatorSummary",
        "type": "object"
      },
      "FeedPage": {
        "description": "Paginated feed with creator summary.",
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/PostWithCreator"
            },
            "title": "Items",
            "type": "array"
          },
          "page": {
            "title": "Page",
            "type": "integer"
          },
          "page_size": {
            "title": "Page Size",
            "type": "integer"
          },
          "total": {
            "title": "Total",
            "type": "integer"
          }
        },
        "required": [
          "items",
          "total",
          "page",
          "page_size"
        ],
        "title": "FeedPage",
        "type": "object"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "title": "Detail",
            "type": "array"
          }
        },
        "title": "HTTPValidationError",
        "type": "object"
      },
      "KycSessionResponse": {
        "properties": {
          "redirect_url": {
            "title": "Redirect Url",
            "type": "string"
          },
          "session_id": {
            "title": "Session Id",
            "type": "string"
          }
        },
        "required": [
          "redirect_url",
          "session_id"
        ],
        "title": "KycSessionResponse",
        "type": "object"
      },
      "KycStatusResponse": {
        "properties": {
          "creator_state": {
            "title": "Creator State",
            "type": "string"
          },
          "session_status": {
            "title": "Session Status",
            "type": "string"
          }
        },
        "required": [
          "session_status",
          "creator_state"
        ],
        "title": "KycStatusResponse",
        "type": "object"
      },
      "LedgerEntryCreate": {
        "properties": {
          "account_id": {
            "title": "Account Id",
            "type": "string"
          },
          "amount": {
            "anyOf": [
              {
                "exclusiveMinimum": 0.0,
                "type": "number"
              },
              {
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
                "type": "string"
              }
            ],
            "title": "Amount"
          },
          "currency": {
            "maxLength": 8,
            "minLength": 3,
            "title": "Currency",
            "type": "string"
          },
          "direction": {
            "pattern": "^(credit|debit)$",
            "title": "Direction",
            "type": "string"
          },
          "reference": {
            "title": "Reference",
            "type": "string"
          }
        },
        "required": [
          "account_id",
          "currency",
          "amount",
          "direction",
          "reference"
        ],
        "title": "LedgerEntryCreate",
        "type": "object"
      },
      "LedgerEntryOut": {
        "properties": {
          "account_id": {
            "title": "Account Id",
            "type": "string"
          },
          "amount": {
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Amount",
            "type": "string"
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "currency": {
            "title": "Currency",
            "type": "string"
          },
          "direction": {
            "title": "Direction",
            "type": "string"
          },
          "id": {
            "format": "uuid",
            "title": "Id",
            "type": "string"
          },
          "reference": {
            "title": "Reference",
            "type": "string"
          }
        },
        "required": [
          "id",
          "account_id",
          "currency",
          "amount",
          "direction",
          "reference",
          "created_at"
        ],
        "title": "LedgerEntryOut",
        "type": "object"
      },
      "MediaCreate": {
        "properties": {
          "content_type": {
            "title": "Content Type",
            "type": "string"
          },
          "object_key": {
            "maxLength": 255,
            "minLength": 3,
            "title": "Object Key",
            "type": "string"
          },
          "size_bytes": {
            "title": "Size Bytes",
            "type": "integer"
          }
        },
        "required": [
          "object_key",
          "content_type",
          "size_bytes"
        ],
        "title": "MediaCreate",
        "type": "object"
      },
      "OnboardingStatusResponse": {
        "properties": {
          "checklist": {
            "additionalProperties": {
              "type": "boolean"
            },
            "title": "Checklist",
            "type": "object"
          },
          "state": {
            "title": "State",
            "type": "string"
          }
        },
        "required": [
          "state",
          "checklist"
        ],
        "title": "OnboardingStatusResponse",
        "type": "object"
      },
      "PostCreate": {
        "description": "Create post body.",
        "properties": {
          "asset_ids": {
            "items": {
              "format": "uuid",
              "type": "string"
            },
            "title": "Asset Ids",
            "type": "array"
          },
          "caption": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Caption"
          },
          "nsfw": {
            "default": false,
            "title": "Nsfw",
            "type": "boolean"
          },
          "type": {
            "pattern": "^(TEXT|IMAGE|VIDEO)$",
            "title": "Type",
            "type": "string"
          },
          "visibility": {
            "pattern": "^(PUBLIC|FOLLOWERS|SUBSCRIBERS)$",
            "title": "Visibility",
            "type": "string"
          }
        },
        "required": [
          "type",
          "visibility"
        ],
        "title": "PostCreate",
        "type": "object"
      },
      "PostOut": {
        "description": "Post as returned by API (asset_ids only; client uses download endpoint).",
        "properties": {
          "asset_ids": {
            "items": {
              "format": "uuid",
              "type": "string"
            },
            "title": "Asset Ids",
            "type": "array"
          },
          "caption": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Caption"
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "creator_user_id": {
            "format": "uuid",
            "title": "Creator User Id",
            "type": "string"
          },
          "id": {
            "format": "uuid",
            "title": "Id",
            "type": "string"
          },
          "is_locked": {
            "default": false,
            "description": "True when viewer cannot access content (teaser only).",
            "title": "Is Locked",
            "type": "boolean"
          },
          "locked_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "When is_locked: SUBSCRIPTION_REQUIRED or FOLLOW_REQUIRED for UI copy.",
            "title": "Locked Reason"
          },
          "nsfw": {
            "title": "Nsfw",
            "type": "boolean"
          },
          "type": {
            "title": "Type",
            "type": "string"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          },
          "visibility": {
            "title": "Visibility",
            "type": "string"
          }
        },
        "required": [
          "id",
          "creator_user_id",
          "type",
          "caption",
          "visibility",
          "nsfw",
          "created_at",
          "updated_at"
        ],
        "title": "PostOut",
        "type": "object"
      },
      "PostPage": {
        "description": "Paginated list of posts.",
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/PostOut"
            },
            "title": "Items",
            "type": "array"
          },
          "page": {
            "title": "Page",
            "type": "integer"
          },
          "page_size": {
            "title": "Page Size",
            "type": "integer"
          },
          "total": {
            "title": "Total",
            "type": "integer"
          }
        },
        "required": [
          "items",
          "total",
          "page",
          "page_size"
        ],
        "title": "PostPage",
        "type": "object"
      },
      "PostWithCreator": {
        "description": "Post with creator summary (e.g. feed).",
        "properties": {
          "asset_ids": {
            "items": {
              "format": "uuid",
              "type": "string"
            },
            "title": "Asset Ids",
            "type": "array"
          },
          "caption": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Caption"
          },
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "creator": {
            "$ref": "#/components/schemas/CreatorSummary"
          },
          "creator_user_id": {
            "format": "uuid",
            "title": "Creator User Id",
            "type": "string"
          },
          "id": {
            "format": "uuid",
            "title": "Id",
            "type": "string"
          },
          "nsfw": {
            "title": "Nsfw",
            "type": "boolean"
          },
          "type": {
            "title": "Type",
            "type": "string"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          },
          "visibility": {
            "title": "Visibility",
            "type": "string"
          }
        },
        "required": [
          "id",
          "creator_user_id",
          "type",
          "caption",
          "visibility",
          "nsfw",
          "created_at",
          "updated_at",
          "creator"
        ],
        "title": "PostWithCreator",
        "type": "object"
      },
      "ProfileOut": {
        "properties": {
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "display_name": {
            "title": "Display Name",
            "type": "string"
          },
          "id": {
            "format": "uuid",
            "title": "Id",
            "type": "string"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          }
        },
        "required": [
          "id",
          "display_name",
          "created_at",
          "updated_at"
        ],
        "title": "ProfileOut",
        "type": "object"
      },
      "SignedUrlResponse": {
        "properties": {
          "download_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Download Url"
          },
          "upload_url": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Upload Url"
          }
        },
        "title": "SignedUrlResponse",
        "type": "object"
      },
      "TokenResponse": {
        "properties": {
          "access_token": {
            "title": "Access Token",
            "type": "string"
          },
          "token_type": {
            "default": "bearer",
            "title": "Token Type",
            "type": "string"
          }
        },
        "required": [
          "access_token"
        ],
        "title": "TokenResponse",
        "type": "object"
      },
      "UploadUrlResponse": {
        "description": "Response for POST /media/upload-url: asset_id and signed PUT URL.",
        "properties": {
          "asset_id": {
            "format": "uuid",
            "title": "Asset Id",
            "type": "string"
          },
          "upload_url": {
            "title": "Upload Url",
            "type": "string"
          }
        },
        "required": [
          "asset_id",
          "upload_url"
        ],
        "title": "UploadUrlResponse",
        "type": "object"
      },
      "UserCreate": {
        "properties": {
          "display_name": {
            "title": "Display Name",
            "type": "string"
          },
          "email": {
            "format": "email",
            "title": "Email",
            "type": "string"
          },
          "password": {
            "minLength": 8,
            "title": "Password",
            "type": "string"
          }
        },
        "required": [
          "email",
          "password",
          "display_name"
        ],
        "title": "UserCreate",
        "type": "object"
      },
      "UserLogin": {
        "properties": {
          "email": {
            "format": "email",
            "title": "Email",
            "type": "string"
          },
          "password": {
            "title": "Password",
            "type": "string"
          }
        },
        "required": [
          "email",
          "password"
        ],
        "title": "UserLogin",
        "type": "object"
      },
      "UserOut": {
        "properties": {
          "created_at": {
            "format": "date-time",
            "title": "Created At",
            "type": "string"
          },
          "email": {
            "format": "email",
            "title": "Email",
            "type": "string"
          },
          "id": {
            "format": "uuid",
            "title": "Id",
            "type": "string"
          },
          "is_active": {
            "title": "Is Active",
            "type": "boolean"
          },
          "profile": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ProfileOut"
              },
              {
                "type": "null"
              }
            ]
          },
          "role": {
            "title": "Role",
            "type": "string"
          },
          "updated_at": {
            "format": "date-time",
            "title": "Updated At",
            "type": "string"
          }
        },
        "required": [
          "id",
          "email",
          "role",
          "is_active",
          "profile",
          "created_at",
          "updated_at"
        ],
        "title": "UserOut",
        "type": "object"
      },
      "ValidationError": {
        "properties": {
          "ctx": {
            "title": "Context",
            "type": "object"
          },
          "input": {
            "title": "Input"
          },
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "title": "Location",
            "type": "array"
          },
          "msg": {
            "title": "Message",
            "type": "string"
          },
          "type": {
            "title": "Error Type",
            "type": "string"
          }
        },
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError",
        "type": "object"
      },
      "VerifyEmailRequest": {
        "properties": {
          "token": {
            "minLength": 1,
            "title": "Token",
            "type": "string"
          }
        },
        "required": [
          "token"
        ],
        "title": "VerifyEmailRequest",
        "type": "object"
      },
      "WebhookAck": {
        "properties": {
          "status": {
            "title": "Status",
            "type": "string"
          }
        },
        "required": [
          "status"
        ],
        "title": "WebhookAck",
        "type": "object"
      }
    }
  },
  "info": {
    "title": "Zinovia Fans API",
    "version": "0.1.0"
  },
  "openapi": "3.1.0",
  "paths": {
    "/auth/login": {
      "post": {
        "operationId": "auth_login",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserLogin"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Login",
        "tags": [
          "auth"
        ]
      }
    },
    "/auth/me": {
      "get": {
        "description": "Returns the current authenticated user (any role). Use cookie or Bearer token.",
        "operationId": "auth_me",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserOut"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Current user",
        "tags": [
          "auth"
        ]
      }
    },
    "/auth/register": {
      "post": {
        "operationId": "auth_register",
        "parameters": [
          {
            "in": "header",
            "name": "Idempotency-Key",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Idempotency-Key"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatorRegisterRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreatorRegisterResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Register",
        "tags": [
          "auth"
        ]
      }
    },
    "/auth/signup": {
      "post": {
        "operationId": "auth_signup",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Signup",
        "tags": [
          "auth"
        ]
      }
    },
    "/auth/verify-email": {
      "post": {
        "operationId": "auth_verify_email",
        "parameters": [
          {
            "in": "header",
            "name": "Idempotency-Key",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Idempotency-Key"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VerifyEmailRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "title": "Response Auth Verify Email",
                  "type": "object"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Verify Email",
        "tags": [
          "auth"
        ]
      }
    },
    "/billing/checkout/subscription": {
      "post": {
        "description": "Start Stripe Checkout for subscribing to a creator. Returns URL to redirect the fan. 501 if Stripe not configured.",
        "operationId": "billing_checkout_subscription",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CheckoutSubscriptionCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CheckoutSubscriptionOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Checkout Subscription",
        "tags": [
          "billing"
        ]
      }
    },
    "/billing/webhooks/stripe": {
      "post": {
        "description": "Stripe webhook: signature verified, idempotent by event id. Store event then process; set processed_at.",
        "operationId": "billing_webhooks_stripe",
        "parameters": [
          {
            "in": "header",
            "name": "Stripe-Signature",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Stripe-Signature"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WebhookAck"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Stripe Webhook",
        "tags": [
          "billing"
        ]
      }
    },
    "/creators": {
      "get": {
        "description": "List discoverable creators. Paginated. Optional search (handle/display_name ILIKE).",
        "operationId": "creators_list",
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "required": false,
            "schema": {
              "default": 1,
              "minimum": 1,
              "title": "Page",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "page_size",
            "required": false,
            "schema": {
              "default": 20,
              "maximum": 100,
              "minimum": 1,
              "title": "Page Size",
              "type": "integer"
            }
          },
          {
            "description": "Search by handle or display name",
            "in": "query",
            "name": "q",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Search by handle or display name",
              "title": "Q"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreatorDiscoverPage"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "List Creators",
        "tags": [
          "creators"
        ]
      }
    },
    "/creators/me": {
      "get": {
        "description": "Creator role only. Returns the authenticated creator's profile (403 for fans).",
        "operationId": "creators_get_me",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreatorProfilePublic"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Current creator profile",
        "tags": [
          "creators"
        ]
      },
      "patch": {
        "operationId": "creators_update_me",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatorProfileUpdate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreatorProfilePublic"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Update Me",
        "tags": [
          "creators"
        ]
      }
    },
    "/creators/me/following": {
      "get": {
        "operationId": "creators_me_following",
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "required": false,
            "schema": {
              "default": 1,
              "minimum": 1,
              "title": "Page",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "page_size",
            "required": false,
            "schema": {
              "default": 20,
              "maximum": 100,
              "minimum": 1,
              "title": "Page Size",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreatorFollowingPage"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Me Following",
        "tags": [
          "creators"
        ]
      }
    },
    "/creators/{creator_id}/follow": {
      "delete": {
        "operationId": "creators_unfollow",
        "parameters": [
          {
            "in": "path",
            "name": "creator_id",
            "required": true,
            "schema": {
              "format": "uuid",
              "title": "Creator Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "title": "Response Creators Unfollow",
                  "type": "object"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Unfollow",
        "tags": [
          "creators"
        ]
      },
      "post": {
        "operationId": "creators_follow",
        "parameters": [
          {
            "in": "path",
            "name": "creator_id",
            "required": true,
            "schema": {
              "format": "uuid",
              "title": "Creator Id",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "title": "Response Creators Follow",
                  "type": "object"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Follow",
        "tags": [
          "creators"
        ]
      }
    },
    "/creators/{handle}": {
      "get": {
        "operationId": "creators_get_by_handle",
        "parameters": [
          {
            "in": "path",
            "name": "handle",
            "required": true,
            "schema": {
              "title": "Handle",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreatorProfilePublic"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Get Creator",
        "tags": [
          "creators"
        ]
      }
    },
    "/creators/{handle}/posts": {
      "get": {
        "operationId": "creators_list_posts_by_handle",
        "parameters": [
          {
            "in": "path",
            "name": "handle",
            "required": true,
            "schema": {
              "title": "Handle",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "page",
            "required": false,
            "schema": {
              "default": 1,
              "minimum": 1,
              "title": "Page",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "page_size",
            "required": false,
            "schema": {
              "default": 20,
              "maximum": 100,
              "minimum": 1,
              "title": "Page Size",
              "type": "integer"
            }
          },
          {
            "description": "Include locked posts as teasers (FOLLOW_REQUIRED / SUBSCRIPTION_REQUIRED).",
            "in": "query",
            "name": "include_locked",
            "required": false,
            "schema": {
              "default": true,
              "description": "Include locked posts as teasers (FOLLOW_REQUIRED / SUBSCRIPTION_REQUIRED).",
              "title": "Include Locked",
              "type": "boolean"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PostPage"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "List Creator Posts",
        "tags": [
          "creators"
        ]
      }
    },
    "/feed": {
      "get": {
        "operationId": "feed_list",
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "required": false,
            "schema": {
              "default": 1,
              "minimum": 1,
              "title": "Page",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "page_size",
            "required": false,
            "schema": {
              "default": 20,
              "maximum": 100,
              "minimum": 1,
              "title": "Page Size",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeedPage"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Feed",
        "tags": [
          "feed"
        ]
      }
    },
    "/health": {
      "get": {
        "operationId": "health_health_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": {
                    "type": "string"
                  },
                  "title": "Response Health Health Get",
                  "type": "object"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Health"
      }
    },
    "/kyc/mock-complete": {
      "post": {
        "description": "Staging-only: simulate KYC provider completion. Frontend calls this from /mock-kyc.",
        "operationId": "kyc_mock_complete",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "title": "Response Kyc Mock Complete",
                  "type": "object"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Mock Kyc Complete",
        "tags": [
          "kyc"
        ]
      }
    },
    "/kyc/session": {
      "post": {
        "operationId": "kyc_create_session",
        "parameters": [
          {
            "in": "header",
            "name": "Idempotency-Key",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Idempotency-Key"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KycSessionResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Create Kyc Session",
        "tags": [
          "kyc"
        ]
      }
    },
    "/kyc/status": {
      "get": {
        "operationId": "kyc_status",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/KycStatusResponse"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Get Kyc Status",
        "tags": [
          "kyc"
        ]
      }
    },
    "/ledger/entries": {
      "post": {
        "description": "Admin-only. For internal tooling (e.g. balance adjustments). Not used by the web app.",
        "operationId": "ledger_create_entry",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LedgerEntryCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LedgerEntryOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Create ledger entry (admin)",
        "tags": [
          "ledger"
        ]
      }
    },
    "/media/upload-url": {
      "post": {
        "operationId": "media_upload_url",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MediaCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UploadUrlResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Create Upload Url",
        "tags": [
          "media"
        ]
      }
    },
    "/media/{media_id}/download-url": {
      "get": {
        "operationId": "media_download_url",
        "parameters": [
          {
            "in": "path",
            "name": "media_id",
            "required": true,
            "schema": {
              "title": "Media Id",
              "type": "string"
            }
          },
          {
            "in": "query",
            "name": "variant",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Variant"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SignedUrlResponse"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Create Download Url",
        "tags": [
          "media"
        ]
      }
    },
    "/onboarding/status": {
      "get": {
        "operationId": "onboarding_status",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OnboardingStatusResponse"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Get Status",
        "tags": [
          "onboarding"
        ]
      }
    },
    "/posts": {
      "post": {
        "operationId": "posts_create",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PostCreate"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PostOut"
                }
              }
            },
            "description": "Successful Response"
          },
          "422": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            },
            "description": "Validation Error"
          }
        },
        "summary": "Create",
        "tags": [
          "posts"
        ]
      }
    },
    "/ready": {
      "get": {
        "operationId": "ready_ready_get",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "title": "Response Ready Ready Get",
                  "type": "object"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Ready"
      }
    },
    "/webhooks/kyc": {
      "post": {
        "operationId": "webhooks_kyc",
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "additionalProperties": true,
                  "title": "Response Webhooks Kyc",
                  "type": "object"
                }
              }
            },
            "description": "Successful Response"
          }
        },
        "summary": "Kyc Webhook",
        "tags": [
          "webhooks"
        ]
      }
    }
  }
}